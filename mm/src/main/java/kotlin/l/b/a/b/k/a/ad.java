package kotlin.l.b.a.b.k.a;

import com.tencent.matrix.trace.core.AppMethodBeat;
import com.tencent.mm.sdk.platformtools.LocaleUtil;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import kotlin.a.ae;
import kotlin.a.j;
import kotlin.a.v;
import kotlin.g.b.aa;
import kotlin.g.b.n;
import kotlin.g.b.p;
import kotlin.g.b.q;
import kotlin.l.b.a.b.a.f;
import kotlin.l.b.a.b.a.k;
import kotlin.l.b.a.b.b.ar;
import kotlin.l.b.a.b.b.as;
import kotlin.l.b.a.b.b.h;
import kotlin.l.b.a.b.b.l;
import kotlin.l.b.a.b.b.s;
import kotlin.l.b.a.b.b.y;
import kotlin.l.b.a.b.e.a;
import kotlin.l.b.a.b.e.b.g;
import kotlin.l.b.a.b.k.a.b.m;
import kotlin.l.b.a.b.m.ab;
import kotlin.l.b.a.b.m.ac;
import kotlin.l.b.a.b.m.aj;
import kotlin.l.b.a.b.m.am;
import kotlin.l.b.a.b.m.an;
import kotlin.l.b.a.b.m.ao;
import kotlin.l.b.a.b.m.at;
import kotlin.l.b.a.b.m.av;
import kotlin.l.b.a.b.m.ax;
import kotlin.l.b.a.b.m.bh;
import kotlin.l.b.a.b.m.u;
import kotlin.m.i;

public final class ad {
    private final String TJl;
    private final kotlin.g.a.b<Integer, kotlin.l.b.a.b.b.e> TLF;
    private final kotlin.g.a.b<Integer, h> TLG;
    private final Map<Integer, as> TLH;
    private final ad TLI;
    private final String TLJ;
    boolean TLK;
    final n TLm;

    /* access modifiers changed from: package-private */
    public static final class e extends q implements kotlin.g.a.b<Integer, kotlin.l.b.a.b.b.e> {
        final /* synthetic */ ad TLL;
        final /* synthetic */ a.p TLM;

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        e(ad adVar, a.p pVar) {
            super(1);
            this.TLL = adVar;
            this.TLM = pVar;
        }

        /* access modifiers changed from: package-private */
        public static final /* synthetic */ class a extends n implements kotlin.g.a.b<kotlin.l.b.a.b.f.a, kotlin.l.b.a.b.f.a> {
            public static final a TLN = new a();

            static {
                AppMethodBeat.i(60365);
                AppMethodBeat.o(60365);
            }

            a() {
                super(1);
            }

            @Override // kotlin.g.b.e
            public final kotlin.l.d Rs() {
                AppMethodBeat.i(60364);
                kotlin.l.b bp = aa.bp(kotlin.l.b.a.b.f.a.class);
                AppMethodBeat.o(60364);
                return bp;
            }

            @Override // kotlin.l.a, kotlin.g.b.e
            public final String getName() {
                return "getOuterClassId";
            }

            @Override // kotlin.g.b.e
            public final String getSignature() {
                return "getOuterClassId()Lorg/jetbrains/kotlin/name/ClassId;";
            }

            /* Return type fixed from 'java.lang.Object' to match base method */
            /* JADX DEBUG: Method arguments types fixed to match base method, original types: [java.lang.Object] */
            @Override // kotlin.g.a.b
            public final /* synthetic */ kotlin.l.b.a.b.f.a invoke(kotlin.l.b.a.b.f.a aVar) {
                AppMethodBeat.i(60363);
                kotlin.l.b.a.b.f.a aVar2 = aVar;
                p.h(aVar2, "p1");
                kotlin.l.b.a.b.f.a hJb = aVar2.hJb();
                AppMethodBeat.o(60363);
                return hJb;
            }
        }

        /* access modifiers changed from: package-private */
        public static final class b extends q implements kotlin.g.a.b<a.p, a.p> {
            final /* synthetic */ e TLO;

            /* JADX INFO: super call moved to the top of the method (can break code semantics) */
            b(e eVar) {
                super(1);
                this.TLO = eVar;
            }

            /* Return type fixed from 'java.lang.Object' to match base method */
            /* JADX DEBUG: Method arguments types fixed to match base method, original types: [java.lang.Object] */
            @Override // kotlin.g.a.b
            public final /* synthetic */ a.p invoke(a.p pVar) {
                AppMethodBeat.i(60366);
                a.p pVar2 = pVar;
                p.h(pVar2, LocaleUtil.ITALIAN);
                a.p b2 = g.b(pVar2, this.TLO.TLL.TLm.SZI);
                AppMethodBeat.o(60366);
                return b2;
            }
        }

        /* access modifiers changed from: package-private */
        public static final class c extends q implements kotlin.g.a.b<a.p, Integer> {
            public static final c TLP = new c();

            static {
                AppMethodBeat.i(60368);
                AppMethodBeat.o(60368);
            }

            c() {
                super(1);
            }

            /* Return type fixed from 'java.lang.Object' to match base method */
            /* JADX DEBUG: Method arguments types fixed to match base method, original types: [java.lang.Object] */
            @Override // kotlin.g.a.b
            public final /* synthetic */ Integer invoke(a.p pVar) {
                AppMethodBeat.i(60367);
                a.p pVar2 = pVar;
                p.h(pVar2, LocaleUtil.ITALIAN);
                Integer valueOf = Integer.valueOf(pVar2.getArgumentCount());
                AppMethodBeat.o(60367);
                return valueOf;
            }
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        /* JADX DEBUG: Method arguments types fixed to match base method, original types: [java.lang.Object] */
        @Override // kotlin.g.a.b
        public final /* synthetic */ kotlin.l.b.a.b.b.e invoke(Integer num) {
            AppMethodBeat.i(60369);
            kotlin.l.b.a.b.b.e avK = avK(num.intValue());
            AppMethodBeat.o(60369);
            return avK;
        }

        public final kotlin.l.b.a.b.b.e avK(int i2) {
            AppMethodBeat.i(60370);
            kotlin.l.b.a.b.f.a a2 = x.a(this.TLL.TLm.SZH, i2);
            List<Integer> d2 = i.d(i.d(i.b(this.TLM, new b(this)), c.TLP));
            int e2 = i.e(i.b(a2, a.TLN));
            while (d2.size() < e2) {
                d2.add(0);
            }
            kotlin.l.b.a.b.b.e a3 = this.TLL.TLm.Tvt.TeR.a(a2, d2);
            AppMethodBeat.o(60370);
            return a3;
        }
    }

    static final class a extends q implements kotlin.g.a.b<Integer, kotlin.l.b.a.b.b.e> {
        final /* synthetic */ ad TLL;

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        a(ad adVar) {
            super(1);
            this.TLL = adVar;
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        /* JADX DEBUG: Method arguments types fixed to match base method, original types: [java.lang.Object] */
        @Override // kotlin.g.a.b
        public final /* synthetic */ kotlin.l.b.a.b.b.e invoke(Integer num) {
            AppMethodBeat.i(60358);
            int intValue = num.intValue();
            ad adVar = this.TLL;
            kotlin.l.b.a.b.f.a a2 = x.a(adVar.TLm.SZH, intValue);
            if (a2.BPb) {
                kotlin.l.b.a.b.b.e g2 = adVar.TLm.Tvt.g(a2);
                AppMethodBeat.o(60358);
                return g2;
            }
            kotlin.l.b.a.b.b.e b2 = s.b(adVar.TLm.Tvt.Tge, a2);
            AppMethodBeat.o(60358);
            return b2;
        }
    }

    /* access modifiers changed from: package-private */
    public static final class b extends q implements kotlin.g.a.b<a.p, List<? extends a.p.C2320a>> {
        final /* synthetic */ ad TLL;

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        b(ad adVar) {
            super(1);
            this.TLL = adVar;
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        /* JADX DEBUG: Method arguments types fixed to match base method, original types: [java.lang.Object] */
        @Override // kotlin.g.a.b
        public final /* synthetic */ List<? extends a.p.C2320a> invoke(a.p pVar) {
            AppMethodBeat.i(60359);
            List<a.p.C2320a> u = u(pVar);
            AppMethodBeat.o(60359);
            return u;
        }

        public final List<a.p.C2320a> u(a.p pVar) {
            v vVar;
            AppMethodBeat.i(60360);
            p.h(pVar, "$this$collectAllArguments");
            List<a.p.C2320a> list = pVar.TwN;
            p.g(list, "argumentList");
            List<a.p.C2320a> list2 = list;
            a.p b2 = g.b(pVar, this.TLL.TLm.SZI);
            if (b2 != null) {
                vVar = u(b2);
            } else {
                vVar = null;
            }
            if (vVar == null) {
                vVar = v.SXr;
            }
            List<a.p.C2320a> b3 = j.b((Collection) list2, (Iterable) vVar);
            AppMethodBeat.o(60360);
            return b3;
        }
    }

    static final class d extends q implements kotlin.g.a.b<Integer, h> {
        final /* synthetic */ ad TLL;

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        d(ad adVar) {
            super(1);
            this.TLL = adVar;
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        /* JADX DEBUG: Method arguments types fixed to match base method, original types: [java.lang.Object] */
        @Override // kotlin.g.a.b
        public final /* synthetic */ h invoke(Integer num) {
            ar arVar = null;
            AppMethodBeat.i(60362);
            int intValue = num.intValue();
            ad adVar = this.TLL;
            kotlin.l.b.a.b.f.a a2 = x.a(adVar.TLm.SZH, intValue);
            if (a2.BPb) {
                AppMethodBeat.o(60362);
                return null;
            }
            y yVar = adVar.TLm.Tvt.Tge;
            p.h(yVar, "$this$findTypeAliasAcrossModuleDependencies");
            p.h(a2, "classId");
            h a3 = s.a(yVar, a2);
            if (a3 instanceof ar) {
                arVar = a3;
            }
            ar arVar2 = arVar;
            AppMethodBeat.o(60362);
            return arVar2;
        }
    }

    private ad(n nVar, ad adVar, List<a.r> list, String str, String str2) {
        LinkedHashMap linkedHashMap;
        p.h(nVar, "c");
        p.h(list, "typeParameterProtos");
        p.h(str, "debugName");
        p.h(str2, "containerPresentableName");
        AppMethodBeat.i(60383);
        this.TLm = nVar;
        this.TLI = adVar;
        this.TJl = str;
        this.TLJ = str2;
        this.TLK = false;
        this.TLF = this.TLm.Tvt.TcN.V(new a(this));
        this.TLG = this.TLm.Tvt.TcN.V(new d(this));
        if (list.isEmpty()) {
            linkedHashMap = ae.emptyMap();
        } else {
            LinkedHashMap linkedHashMap2 = new LinkedHashMap();
            int i2 = 0;
            for (T t : list) {
                linkedHashMap2.put(Integer.valueOf(t.TwM), new m(this.TLm, t, i2));
                i2++;
            }
            linkedHashMap = linkedHashMap2;
        }
        this.TLH = linkedHashMap;
        AppMethodBeat.o(60383);
    }

    public /* synthetic */ ad(n nVar, ad adVar, List list, String str, String str2, byte b2) {
        this(nVar, adVar, list, str, str2);
    }

    public final List<as> hLg() {
        AppMethodBeat.i(60371);
        List<as> p = j.p(this.TLH.values());
        AppMethodBeat.o(60371);
        return p;
    }

    public final ab r(a.p pVar) {
        AppMethodBeat.i(60372);
        p.h(pVar, "proto");
        if (pVar.hGU()) {
            String string = this.TLm.SZH.getString(pVar.Tzl);
            aj s = s(pVar);
            a.p a2 = g.a(pVar, this.TLm.SZI);
            if (a2 == null) {
                p.hyc();
            }
            ab a3 = this.TLm.Tvt.TKR.a(pVar, string, s, s(a2));
            AppMethodBeat.o(60372);
            return a3;
        }
        aj s2 = s(pVar);
        AppMethodBeat.o(60372);
        return s2;
    }

    public final aj s(a.p pVar) {
        aj c2;
        AppMethodBeat.i(60373);
        p.h(pVar, "proto");
        if (pVar.hGX()) {
            avJ(pVar.Tzo);
        } else if (pVar.hHa()) {
            avJ(pVar.Tzr);
        }
        at t = t(pVar);
        if (u.L(t.hzS())) {
            aj a2 = u.a(t.toString(), t);
            p.g(a2, "ErrorUtils.createErrorTy….toString(), constructor)");
            AppMethodBeat.o(60373);
            return a2;
        }
        kotlin.l.b.a.b.k.a.b.b bVar = new kotlin.l.b.a.b.k.a.b.b(this.TLm.Tvt.TcN, new c(this, pVar));
        List<a.p.C2320a> u = new b(this).u(pVar);
        ArrayList arrayList = new ArrayList(j.a(u, 10));
        int i2 = 0;
        for (T t2 : u) {
            int i3 = i2 + 1;
            if (i2 < 0) {
                j.hxH();
            }
            List<as> parameters = t.getParameters();
            p.g(parameters, "constructor.parameters");
            arrayList.add(a((as) j.L(parameters, i2), t2));
            i2 = i3;
        }
        List<? extends av> p = j.p(arrayList);
        Boolean avk = kotlin.l.b.a.b.e.b.b.TAT.avk(pVar.Txb);
        p.g(avk, "Flags.SUSPEND_TYPE.get(proto.flags)");
        if (avk.booleanValue()) {
            c2 = a(bVar, t, p, pVar.Tzk);
        } else {
            c2 = ac.c(bVar, t, p, pVar.Tzk);
        }
        a.p c3 = g.c(pVar, this.TLm.SZI);
        if (c3 == null) {
            AppMethodBeat.o(60373);
            return c2;
        }
        aj b2 = am.b(c2, s(c3));
        AppMethodBeat.o(60373);
        return b2;
    }

    private final at t(a.p pVar) {
        at atVar;
        T t;
        AppMethodBeat.i(60374);
        e eVar = new e(this, pVar);
        if (pVar.hGX()) {
            kotlin.l.b.a.b.b.e invoke = this.TLF.invoke(Integer.valueOf(pVar.Tzo));
            if (invoke == null) {
                invoke = eVar.avK(pVar.Tzo);
            }
            at hzz = invoke.hzz();
            p.g(hzz, "(classDescriptors(proto.…assName)).typeConstructor");
            AppMethodBeat.o(60374);
            return hzz;
        }
        if (pVar.hGY()) {
            atVar = avI(pVar.Tzp);
            if (atVar == null) {
                at bup = u.bup("Unknown type parameter " + pVar.Tzp + ". Please try recompiling module containing \"" + this.TLJ + '\"');
                p.g(bup, "ErrorUtils.createErrorTy…\\\"\"\n                    )");
                AppMethodBeat.o(60374);
                return bup;
            }
        } else if (pVar.hGZ()) {
            l lVar = this.TLm.Tko;
            String string = this.TLm.SZH.getString(pVar.Tzq);
            Iterator<T> it = hLg().iterator();
            while (true) {
                if (!it.hasNext()) {
                    t = null;
                    break;
                }
                T next = it.next();
                if (p.j(next.hAH().sG(), string)) {
                    t = next;
                    break;
                }
            }
            T t2 = t;
            if (t2 == null || (atVar = t2.hzz()) == null) {
                at bup2 = u.bup("Deserialized type parameter " + string + " in " + lVar);
                p.g(bup2, "ErrorUtils.createErrorTy…ter $name in $container\")");
                AppMethodBeat.o(60374);
                return bup2;
            }
        } else if (pVar.hHa()) {
            kotlin.l.b.a.b.b.e invoke2 = this.TLG.invoke(Integer.valueOf(pVar.Tzr));
            if (invoke2 == null) {
                invoke2 = eVar.avK(pVar.Tzr);
            }
            at hzz2 = invoke2.hzz();
            p.g(hzz2, "(typeAliasDescriptors(pr…iasName)).typeConstructor");
            AppMethodBeat.o(60374);
            return hzz2;
        } else {
            atVar = u.bup("Unknown type");
            p.g(atVar, "ErrorUtils.createErrorTy…nstructor(\"Unknown type\")");
        }
        AppMethodBeat.o(60374);
        return atVar;
    }

    private final aj a(kotlin.l.b.a.b.b.a.g gVar, at atVar, List<? extends av> list, boolean z) {
        aj ajVar = null;
        AppMethodBeat.i(60375);
        switch (atVar.getParameters().size() - list.size()) {
            case 0:
                ajVar = b(gVar, atVar, list, z);
                break;
            case 1:
                int size = list.size() - 1;
                if (size >= 0) {
                    kotlin.l.b.a.b.b.e atP = atVar.hBh().atP(size);
                    p.g(atP, "functionTypeConstructor.…getSuspendFunction(arity)");
                    at hzz = atP.hzz();
                    p.g(hzz, "functionTypeConstructor.…on(arity).typeConstructor");
                    ajVar = ac.c(gVar, hzz, list, z);
                    break;
                }
                break;
        }
        if (ajVar == null) {
            ajVar = u.S("Bad suspend function in metadata with constructor: ".concat(String.valueOf(atVar)), list);
            p.g(ajVar, "ErrorUtils.createErrorTy…      arguments\n        )");
        }
        AppMethodBeat.o(60375);
        return ajVar;
    }

    private final aj b(kotlin.l.b.a.b.b.a.g gVar, at atVar, List<? extends av> list, boolean z) {
        AppMethodBeat.i(60376);
        aj c2 = ac.c(gVar, atVar, list, z);
        if (!f.d(c2)) {
            AppMethodBeat.o(60376);
            return null;
        }
        aj ai = ai(c2);
        AppMethodBeat.o(60376);
        return ai;
    }

    private final aj ai(ab abVar) {
        ab hBy;
        kotlin.l.b.a.b.f.b bVar;
        boolean z;
        kotlin.l.b.a.b.f.b bVar2 = null;
        AppMethodBeat.i(60377);
        av avVar = (av) j.kv(f.j(abVar));
        if (avVar == null || (hBy = avVar.hBy()) == null) {
            AppMethodBeat.o(60377);
            return null;
        }
        p.g(hBy, "funType.getValueParamete…ll()?.type ?: return null");
        h hzS = hBy.hKE().hzS();
        if (hzS != null) {
            bVar = kotlin.l.b.a.b.j.d.a.o(hzS);
        } else {
            bVar = null;
        }
        if (hBy.hKB().size() != 1 || (!k.a(bVar, true) && !k.a(bVar, false))) {
            aj ajVar = (aj) abVar;
            AppMethodBeat.o(60377);
            return ajVar;
        }
        ab hBy2 = ((av) j.kw(hBy.hKB())).hBy();
        p.g(hBy2, "continuationArgumentType.arguments.single().type");
        l lVar = this.TLm.Tko;
        if (!(lVar instanceof kotlin.l.b.a.b.b.a)) {
            lVar = null;
        }
        kotlin.l.b.a.b.b.a aVar = (kotlin.l.b.a.b.b.a) lVar;
        if (aVar != null) {
            bVar2 = kotlin.l.b.a.b.j.d.a.I(aVar);
        }
        if (p.j(bVar2, ac.TLE)) {
            aj a2 = a(abVar, hBy2);
            AppMethodBeat.o(60377);
            return a2;
        }
        if (this.TLK) {
            z = true;
        } else {
            z = false;
        }
        this.TLK = z;
        aj a3 = a(abVar, hBy2);
        AppMethodBeat.o(60377);
        return a3;
    }

    private static aj a(ab abVar, ab abVar2) {
        AppMethodBeat.i(60378);
        kotlin.l.b.a.b.a.g aM = kotlin.l.b.a.b.m.d.a.aM(abVar);
        kotlin.l.b.a.b.b.a.g hzL = abVar.hzL();
        ab h2 = f.h(abVar);
        List<av> M = j.M(f.j(abVar), 1);
        ArrayList arrayList = new ArrayList(j.a(M, 10));
        for (av avVar : M) {
            arrayList.add(avVar.hBy());
        }
        aj EG = f.a(aM, hzL, h2, arrayList, abVar2, true).EG(abVar.hEa());
        AppMethodBeat.o(60378);
        return EG;
    }

    private final at avI(int i2) {
        at atVar;
        AppMethodBeat.i(60379);
        while (true) {
            as asVar = this.TLH.get(Integer.valueOf(i2));
            if (asVar != null && (atVar = asVar.hzz()) != null) {
                break;
            }
            this = this.TLI;
            if (this == null) {
                atVar = null;
                break;
            }
        }
        AppMethodBeat.o(60379);
        return atVar;
    }

    private final aj avJ(int i2) {
        AppMethodBeat.i(60380);
        if (x.a(this.TLm.SZH, i2).BPb) {
            AppMethodBeat.o(60380);
        } else {
            AppMethodBeat.o(60380);
        }
        return null;
    }

    public final String toString() {
        AppMethodBeat.i(60382);
        String str = this.TJl + (this.TLI == null ? "" : ". Child of " + this.TLI.TJl);
        AppMethodBeat.o(60382);
        return str;
    }

    /* access modifiers changed from: package-private */
    public static final class c extends q implements kotlin.g.a.a<List<? extends kotlin.l.b.a.b.b.a.c>> {
        final /* synthetic */ ad TLL;
        final /* synthetic */ a.p TLM;

        /* JADX INFO: super call moved to the top of the method (can break code semantics) */
        c(ad adVar, a.p pVar) {
            super(0);
            this.TLL = adVar;
            this.TLM = pVar;
        }

        /* Return type fixed from 'java.lang.Object' to match base method */
        @Override // kotlin.g.a.a
        public final /* synthetic */ List<? extends kotlin.l.b.a.b.b.a.c> invoke() {
            AppMethodBeat.i(60361);
            List<kotlin.l.b.a.b.b.a.c> a2 = this.TLL.TLm.Tvt.TKO.a(this.TLM, this.TLL.TLm.SZH);
            AppMethodBeat.o(60361);
            return a2;
        }
    }

    private final av a(as asVar, a.p.C2320a aVar) {
        AppMethodBeat.i(60381);
        if (aVar.Tzx != a.p.C2320a.b.STAR) {
            aa aaVar = aa.TLC;
            a.p.C2320a.b bVar = aVar.Tzx;
            p.g(bVar, "typeArgumentProto.projection");
            bh b2 = aa.b(bVar);
            a.p a2 = g.a(aVar, this.TLm.SZI);
            if (a2 == null) {
                ax axVar = new ax(u.bun("No type recorded"));
                AppMethodBeat.o(60381);
                return axVar;
            }
            ax axVar2 = new ax(b2, r(a2));
            AppMethodBeat.o(60381);
            return axVar2;
        } else if (asVar == null) {
            an anVar = new an(this.TLm.Tvt.Tge.hBh());
            AppMethodBeat.o(60381);
            return anVar;
        } else {
            ao aoVar = new ao(asVar);
            AppMethodBeat.o(60381);
            return aoVar;
        }
    }
}
